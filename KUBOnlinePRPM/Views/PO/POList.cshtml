@model KUBOnlinePRPM.Models.POModel

@if (Model.Type == "All")
{
    <!-- Breadcrumb-v1 -->
    <div class="g-hidden-sm-down g-bg-gray-light-v8 g-pa-20 g-mb-30">
        <ul class="u-list-inline g-color-gray-dark-v6">
            <li class="list-inline-item g-mr-10">
                <a class="u-link-v5 g-color-gray-dark-v6 g-color-lightblue-v3--hover g-valign-middle" href="~/PR">Purchase Order</a>
                <i class="hs-admin-angle-right g-font-size-12 g-color-gray-light-v6 g-valign-middle g-ml-10"></i>
            </li>
            <li class="list-inline-item">
                <span class="g-valign-middle">Purchase Order - Listings</span>
            </li>
        </ul>
    </div>
}
<!-- End Breadcrumb-v1 -->
<div class="media-md align-items-center g-pa-20">
    <div class="d-flex g-mb-0--md g-pa-10">
        <h3 class="g-font-weight-300 g-font-size-20 g-color-black mb-0">Purchase Order List</h3>
    </div>
</div>
<div class="g-bg-white g-brd-1 g-brd-gray-light-v3 g-brd-style-solid rounded g-mb-40">
    <div class="container-fluid g-pa-20">
        @if (Model.Type != "Blanket")
        {
            <table id="POListTable" class="table table-striped table-bordered dt-responsive table-hover" style="width:100%">
                <thead>
                    <tr>
                        <th class="d-none">PO Id</th>
                        <th class="g-first-child all">
                            <div class="media">
                                <div class="d-flex align-self-center">PO No.</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">PO Date</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">PR No.</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">Company</div>
                            </div>
                        </th>
                        <th class="tablet">
                            <div class="media">
                                <div class="d-flex align-self-center">Requestor Name</div>
                            </div>
                        </th>
                        <th class="tablet">
                            <div class="media">
                                <div class="d-flex align-self-center">Vendor ID</div>
                            </div>
                        </th>
                        <th class="tablet">
                            <div class="media">
                                <div class="d-flex align-self-center">Vendor Name</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">Amount Required (RM)</div>
                            </div>
                        </th>
                        <th class="all">
                            <div class="media">
                                <div class="d-flex align-self-center">PO Aging (days)</div>
                            </div>
                        </th>
                        <th class="all">
                            <div class="media">
                                <div class="d-flex align-self-center">Status</div>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        foreach (var item in Model.POListObject)
                        {
                            <tr>
                                <th class="d-none">@Html.DisplayFor(modelItem => item.POId)</th>
                                <td class="all">@Html.DisplayFor(modelItem => item.PONo)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.PODate)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.PRNo)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.Company)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.RequestedName)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.VendorId)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.VendorCompany)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.TotalPrice)</td>
                                <td class="all">@Html.DisplayFor(modelItem => item.POAging)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.Status)</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        }
        @if (Model.Type == "Blanket")
        {
            <table id="POListTable" class="table table-striped table-bordered dt-responsive table-hover" style="width:100%">
                <thead>
                    <tr>
                        <th class="d-none">PO Id</th>
                        <th class="g-first-child all">
                            <div class="media">
                                <div class="d-flex align-self-center">PO No.</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">PO Date</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">Item</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">Quantity</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">Total Price (RM)</div>
                            </div>
                        </th>
                        <th class="all">
                            <div class="media">
                                <div class="d-flex align-self-center">PO Aging (days)</div>
                            </div>
                        </th>
                        <th class="desktop">
                            <div class="media">
                                <div class="d-flex align-self-center">Status</div>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        foreach (var item in Model.POListObject)
                        {
                            <tr>
                                <th class="d-none">@Html.DisplayFor(modelItem => item.POId)</th>
                                <td class="all">@Html.DisplayFor(modelItem => item.PONo)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.PODate)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.POItem)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.Quantity)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.TotalPrice)</td>
                                <td class="all">@Html.DisplayFor(modelItem => item.POAging)</td>
                                <td class="desktop">@Html.DisplayFor(modelItem => item.Status)</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
            if ((Session["ifRequestor"] != null || Session["ifProcurement"] != null) && Model.OutstandingQty != 0 && Model.StatusId == "PR06")
            {
                <div class="col-md-12 col-sm-12">
                    <div class="row">
                        @*<div class="col-md-9 col-sm-8"></div>*@
                        <div class="col-md-3 offset-md-9 col-sm-4 offset-sm-8">
                            <div class="media">
                                <div class="d-flex u-main-nav--push-right text-right">
                                    <div class="row">
                                        <a id="NewPO" href="~/PO/NewPO?type=Blanket" class="btn btn-md u-btn-blue g-mr-5 g-mb-15">NEW PO</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>

@section scripts {
    <script type="text/javascript">
        var UrlPODetails = "@Url.Action("ViewPODetails", "PO")";
        var POListTable;
        var POType = "@Model.Type";
        var touchtime = 0;
    </script>
    <script src="~/Scripts/POList.js"></script>
}
